<%@ page import="lk.sliit.fitnesscenter.fitnesscentermembershipsystem.model.Review" %><%@ page import="java.util.List" %><%@ page import="lk.sliit.fitnesscenter.fitnesscentermembershipsystem.dao.ReviewDAO" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Review Moderation | Pulse Gym</title>    <!-- Bootstrap 5 CSS -->    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">    <!-- Font Awesome for icons -->    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <!-- Google Fonts -->    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">    <link href="https://fonts.googleapis.com/css?family=Oswald:700&display=swap" rel="stylesheet">    <style>        body {            background: #15171b;            color: #e0e0e0;            font-family: 'Poppins', sans-serif;        }        .navbar {            background: #181c23 !important;            border-bottom: 2px solid #1e7a53;        }        .navbar-brand {            font-family: 'Oswald', sans-serif;            font-size: 2rem;            color: #1e7a53 !important;        }        .moderation-panel {            max-width: 1200px;            margin: 80px auto 0 auto;            padding: 32px;        }        .table {            color: #e0e0e0;            background: #181c23;        }        .table thead {            background: #1e7a53;        }        .table th {            border-bottom: 2px solid #1e7a53;        }        .table-striped > tbody > tr:nth-of-type(odd) {            background-color: #1a1d22;        }        .flagged-review {            background-color: #2d1a1a !important;            border-left: 4px solid #8c2327;        }        .star-rating {            color: #ffc107;        }        .btn-danger {            background: #8c2327;            border: none;        }        .btn-danger:hover {            background: #e63946;        }        footer {            background: #181c23;            color: #1e7a53;            margin-top: 40px;        }        @media (max-width: 768px) {            .table-responsive {                overflow-x: auto;            }            .moderation-panel {                padding: 16px;            }        }    </style></head><body><!-- Navigation Bar --><nav class="navbar navbar-expand-lg navbar-dark fixed-top">    <div class="container">        <a class="navbar-brand" href="index.jsp">Pulse Gym</a>        <div class="collapse navbar-collapse">            <ul class="navbar-nav ms-auto">                <li class="nav-item"><a class="nav-link" href="adminDashboard.jsp">Dashboard</a></li>                <li class="nav-item"><a class="nav-link active" href="adminReviews.jsp">Review Moderation</a></li>                <li class="nav-item"><a class="nav-link" href="MemberLogoutServlet">Logout</a></li>            </ul>        </div>    </div></nav><!-- Main Content --><div class="moderation-panel">    <div class="mb-4">        <h2 class="text-center" style="color: #1e7a53; font-family: 'Oswald', sans-serif;">            <i class="fas fa-comment-slash me-2"></i>REVIEW MODERATION PANEL        </h2>        <p class="text-center text-muted">Manage and moderate member reviews</p>    </div>    <% if (request.getParameter("success") != null && "deleted".equals(request.getParameter("success"))) { %>    <div class="alert alert-success text-center mb-4">        Review deleted successfully!    </div>    <% } %>    <div class="table-responsive">        <table class="table table-striped table-hover align-middle">            <thead>            <tr>                <th>ID</th>                <th>Member</th><%--                <th>Rating</th>--%>                <th>Comment</th>                <th>Date</th>                <th>Actions</th>            </tr>            </thead>            <tbody>            <%                ReviewDAO reviewDAO = new ReviewDAO();                List<Review> reviews = reviewDAO.getAllReviews();                if (reviews != null && !reviews.isEmpty()) {                    for (Review review : reviews) {                        boolean isFlagged = review.getComment() != null &&                                (review.getComment().toLowerCase().contains("bad") ||                                        review.getRating() < 2);            %>            <tr class="<%= isFlagged ? "flagged-review" : "" %>">                <td><%= review.getReviewId() %></td>                <td>#<%= review.getMemberId() %></td><%--                <td>--%><%--                    <div class="star-rating">--%><%--                        <% for (int i = 1; i <= 5; i++) { %>--%><%--                        <i class="<%= i <= review.getRating() ? "fas" : "far" %> fa-star"></i>--%><%--                        <% } %>--%><%--                    </div>--%><%--                </td>--%>                <td><%= review.getComment() %></td>                <td><%= review.getReviewDate() %></td>                <td>                    <form action="ReviewServlet" method="post" class="d-inline">                        <input type="hidden" name="action" value="delete">                        <input type="hidden" name="reviewId" value="<%= review.getReviewId() %>">                        <button type="submit" class="btn btn-sm btn-danger"                                onclick="return confirm('Are you sure you want to delete this review?')">                            <i class="fas fa-trash-alt"></i> Delete                        </button>                    </form>                </td>            </tr>            <% }            } else { %>            <tr>                <td colspan="6" class="text-center text-muted">No reviews found</td>            </tr>            <% } %>            </tbody>        </table>    </div>    <div class="text-center mt-4 text-muted">        <small>Flagged reviews are highlighted in red</small>    </div></div><!-- Footer --><footer class="text-center py-4">    <div class="container">        <p class="mb-0">&copy; 2023 Pulse Gym. All rights reserved.</p>    </div></footer><!-- Bootstrap 5 JS --><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script></body></html>