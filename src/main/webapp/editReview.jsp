<%@ page import="lk.sliit.fitnesscenter.fitnesscentermembershipsystem.model.Review" %><%@ page import="lk.sliit.fitnesscenter.fitnesscentermembershipsystem.dao.ReviewDAO" %><%@ page import="java.util.List" %><%@ page contentType="text/html;charset=UTF-8" language="java" %><!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Edit Review | Pulse Gym</title>    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap" rel="stylesheet">    <link href="https://fonts.googleapis.com/css?family=Oswald:600,700&display=swap" rel="stylesheet">    <style>        body {            background: #15171b;            color: #e0e0e0;            font-family: 'Poppins', sans-serif;            overflow-x: hidden;        }        .navbar {            background: #181c23 !important;            border-bottom: 2px solid #1e7a53;            padding: 12px 0;        }        .navbar-brand {            font-family: 'Oswald', sans-serif;            font-size: 2.2rem;            color: #1e7a53 !important;            transition: color 0.3s ease;        }        .navbar-brand:hover {            color: #27ef8c !important;        }        .nav-link {            color: #e0e0e0 !important;            font-weight: 500;            margin: 0 12px;            position: relative;            padding: 5px 0 !important;            transition: color 0.3s ease;        }        .review-card {            max-width: 600px;            margin: 80px auto 40px auto;            background: #1a1d22;            border-radius: 1.2rem;            box-shadow: 0 8px 32px rgba(30, 122, 83, 0.15);            padding: 40px 32px;            transition: transform 0.3s ease, box-shadow 0.3s ease;        }        h2 {            font-family: 'Oswald', sans-serif;            color: #1e7a53;            font-size: 2.5rem;            margin-bottom: 16px;            text-align: center;            letter-spacing: 1px;        }        .form-label {            color: #e0e0e0;            font-weight: 500;        }        .form-control, .form-select {            background: #181c23;            color: #e0e0e0;            border: 1px solid #333;        }        .form-control:focus, .form-select:focus {            background: #181c23;            color: #fff;            border-color: #1e7a53;            box-shadow: 0 0 0 0.2rem rgba(30,122,83,0.15);        }        .btn-pulse {            background: #1e7a53;            color: #e0e0e0;            border: none;            font-weight: bold;            border-radius: 0.5rem;            padding: 10px 20px;            transition: all 0.3s ease;        }        .btn-pulse:hover {            background: #27ef8c;            color: #181c23;            transform: translateY(-2px);        }        .btn-danger {            background: #e63946;            color: #fff;            border: none;            font-weight: bold;            border-radius: 0.5rem;            padding: 10px 20px;            transition: all 0.3s ease;        }        .btn-danger:hover {            background: #ff4757;            transform: translateY(-2px);        }        .error-message {            color: #e63946;            font-size: 0.875rem;            margin-top: 0.25rem;        }        @media (max-width: 600px) {            .review-card {                padding: 20px;                margin: 60px 20px 40px 20px;            }            h2 {                font-size: 2rem;            }        }    </style></head><body><nav class="navbar navbar-expand-lg navbar-dark fixed-top">    <div class="container">        <a class="navbar-brand" href="index.jsp" aria-label="Pulse Gym Home">Pulse Gym</a>        <div class="collapse navbar-collapse">            <ul class="navbar-nav ms-auto">                <li class="nav-item"><a class="nav-link" href="adminDashboard.jsp">Dashboard</a></li>                <li class="nav-item"><a class="nav-link active" href="adminReviews.jsp">Review Moderation</a></li>                <li class="nav-item"><a class="nav-link" href="MemberLogoutServlet">Logout</a></li>            </ul>        </div>    </div></nav><div class="review-card">    <h2><i class="fas fa-edit icon"></i>Edit Review</h2>    <%        int reviewId = Integer.parseInt(request.getParameter("reviewId"));        ReviewDAO reviewDAO = new ReviewDAO();        Review review = null;        List<Review> reviews = reviewDAO.getAllReviews();        for (Review r : reviews) {            if (r.getReviewId() == reviewId) {                review = r;                break;            }        }        if (review == null) {            response.sendRedirect("adminReviews.jsp?error=notfound");            return;        }    %>    <form action="ReviewServlet" method="post" id="editReviewForm">        <input type="hidden" name="action" value="update">        <input type="hidden" name="reviewId" value="<%= review.getReviewId() %>">        <div class="mb-3">            <label class="form-label">Member ID</label>            <input type="text" class="form-control" value="#<%= review.getMemberId() %>" readonly>        </div>        <div class="mb-3">            <label class="form-label">Trainer ID</label>            <input type="text" class="form-control" value="<%= review.getTrainerId() != null ? "#" + review.getTrainerId() : "N/A" %>" readonly>        </div>        <div class="mb-3">            <label class="form-label">Class ID</label>            <input type="text" class="form-control" value="<%= review.getClassId() != null ? "#" + review.getClassId() : "N/A" %>" readonly>        </div>        <div class="mb-3">            <label for="rating" class="form-label">Rating</label>            <select id="rating" name="rating" class="form-select" required>                <option value="1" <%= review.getRating() == 1 ? "selected" : "" %>>1 - Poor</option>                <option value="2" <%= review.getRating() == 2 ? "selected" : "" %>>2 - Fair</option>                <option value="3" <%= review.getRating() == 3 ? "selected" : "" %>>3 - Good</option>                <option value="4" <%= review.getRating() == 4 ? "selected" : "" %>>4 - Very Good</option>                <option value="5" <%= review.getRating() == 5 ? "selected" : "" %>>5 - Excellent</option>            </select>            <div id="ratingError" class="error-message"></div>        </div>        <div class="mb-4">            <label for="comment" class="form-label">Comment</label>            <textarea id="comment" name="comment" class="form-control" rows="4" required minlength="5" maxlength="500"><%= review.getComment() != null ? review.getComment() : "" %></textarea>            <div id="commentError" class="error-message"></div>        </div>        <div class="d-flex justify-content-between">            <a href="adminReviews.jsp" class="btn btn-danger">                <i class="fas fa-times"></i> Cancel            </a>            <button type="submit" class="btn btn-pulse">                <i class="fas fa-save"></i> Save Changes            </button>        </div>    </form></div><footer class="text-center">    <div class="container">        <p class="mb-0">Â© 2025 Pulse Gym. All rights reserved.</p>    </div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><script>    document.getElementById('editReviewForm').addEventListener('submit', function(e) {        let valid = true;        const rating = document.getElementById('rating');        const comment = document.getElementById('comment');        document.querySelectorAll('.error-message').forEach(el => el.textContent = '');        if (!rating.value || rating.value < 1 || rating.value > 5) {            document.getElementById('ratingError').textContent = 'Please select a valid rating';            valid = false;        }        if (!comment.value || comment.value.length < 5) {            document.getElementById('commentError').textContent = 'Comment must be at least 5 characters long';            valid = false;        }        if (!valid) {            e.preventDefault();        }    });</script></body></html>